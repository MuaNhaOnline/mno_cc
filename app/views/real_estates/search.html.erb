<% content_for :stylesheets do %>
	<link rel="stylesheet" href="/assets/real_estates/search.css" />
<% end %>

<% content_for :javascripts do %>
	<script type="text/javascript" src='http://maps.google.com/maps/api/js?key=AIzaSyBsMB8D8mBgDcBqGCyOii1Kgu-BJmfNAvQ&libraries=places'></script>
	<script type="text/javascript" src="/assets/shared/locationpicker.js"></script>
	<script type="text/javascript" src="/assets/real_estates/search.js"></script>
<% end %>

<%
=begin
	@favorite_res, @res, @projects
=end
 
	@_title = 'Kết quả tìm kiếm'
	@_description = ''
	@_main_navigator = {
		background: '/assets/shared/main_navigator/main_2.jpeg',
		list: [
			{
				text: t('.page_title')
			}
		]
	}
	@_main_class = 'res-search'
	@_hide_search_box = true if @res.present?

	page = params[:page].present? ? params[:page].to_i : 1

	search_scope = 'front_layout.search_box.'

	# if per.blank? || !per.is_a Hash

	search_params = params[:search]
	search_params = {} if search_params.blank? || !search_params.is_a?(Hash)
%>

<div class="container-fluid">
	<% if @res.blank? %>
		<div class="alert alert-danger" role="alert">
			<div class="container">
				<%= t 'global.text.empty_callout' %>
			</div>
		</div>
		<div class="alert alert-info" role="alert">
			<div class="container">
				<%= t search_scope + 'register_html', path: create_registration_path(search: search_params) %>
			</div>
		</div>
	<% end %>

	<% if @res.present? %>
		<div class="row">
			<div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
				<article class="container-box container-box-transparent">
					<section class="container-box-header">
						<h2 class="container-box-title">
							<%= t '.box_title' %>
						</h2>
					</section>
					<section class="container-box-body">
						<div class="container-fluid">
							<% if @res.count != 0 %>
								<div class="medium-items-list" id="res_list">
									<%=
										render(
											partial: 'real_estates/items_list_2',
											locals: {
												res: @res
											}
										)
									%>
								</div>
								<div id="res_paginator" data-search-params="<%= { conditions: @res_conditions, search_params: @res_search_params }.to_json %>">
									<%= render partial: 'shared/paginator_2', locals: { results: @res } %>
								</div>
							<% else %>
								<div class="alert alert-warning alert-dismissible">
									<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
									<p>
										<%= t '.empty_re_list' %>
									</p>
								</div>
							<% end %>
						</div>
					</section>
				</article>
			</div>
			<div class="hidden-xs col-sm-3 col-md-3 col-lg-3" style="padding-top: 70px;">
				<%= render partial: '/shared/search_box' %>
			</div>
	<% end %>
</div>