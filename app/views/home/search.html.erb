<% content_for :stylesheets do %>
	<link rel="stylesheet" href="/assets/home/search.css" />
<% end %>

<% content_for :javascripts do %>
	<script type="text/javascript" src="/assets/home/search.js"></script>
<% end %>

<%
=begin
	@favorite_res, @res, @projects
=end
 
	@_title = 'Kết quả tìm kiếm'
	@_description = ''
	@_main_navigator = {
		background: '/assets/shared/main_navigator/main_2.jpeg',
		list: [
			{
				url: '/tim_kiem',
				text: 'Tìm kiếm'
			}
		]
	}
	@_main_class = 'home-search'
	@_fill_search_box = true

	page = params[:page].present? ? params[:page].to_i : 1
%>

<% if @favorite_res.blank? && @res.blank? %>
	<div class="alert alert-danger" role="alert">
		<div class="container">
			Không tìm thấy kết quả phù hợp.
		</div>
	</div>
<% end %>

<% if @favorite_res.present? %>
	<article class="container-box container-box-transparent">
		<section class="container-box-header">
			<h2 class="container-box-title">
				Bất động sản đang được yêu thích
			</h2>
		</section>
		<section class="container-box-body">
			<%= render partial: 'real_estates/items_list', locals: { type: 2, res: @favorite_res, list_id: 'favorite_res_list' } %>
		</section>
	</article>
<% end %>

<% if @res.present? %>
	<article class="container-box container-box-transparent">
		<section class="container-box-header">
			<h2 class="container-box-title">
				Bất động sản dành cho bạn
			</h2>
		</section>
		<section class="container-box-body">
			<div class="container">
				<%
					per = 12
								
					page_href = Proc.new do |page| 
						request.GET['page'] = page
						'?' + request.GET.to_query
					end
				%>
				<%=
					render(
						partial: 'real_estates/items_list',
						locals: { 
							res: @res, 
							paging: @res.total_pages,
							current_page: @res.current_page,
							list_id: 'res_list',
							page_href: page_href
						}
					)
				%>
			</div>
		</section>
	</article>
<% end %>