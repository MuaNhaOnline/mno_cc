<% content_for :stylesheets do %>
	<link rel="stylesheet" href="/assets/real_estates/index.css" />
<% end %>

<% content_for :javascripts do %>
	<script type="text/javascript" src="/assets/real_estates/index.js"></script>
<% end %>

<%
=begin
	@favorite_res, @res, @projects
=end
 
	@_title = 'Kết quả tìm kiếm'
	@_description = ''
	@_main_navigator = {
		background: '/assets/shared/main_navigator/main_2.jpeg',
		list: [
			{
				url: '/tim_kiem',
				text: 'Tìm kiếm'
			}
		]
	}
	@_main_class = 'home-search'

	page = params[:page].present? ? params[:page].to_i : 1
%>

<article class="container-box container-box-transparent">
	<section class="container-box-header">
		<h2 class="container-box-title">
			Bất động sản đang được yêu thích
		</h2>
	</section>
	<section class="container-box-body">
		<%
			per = 3
		%>
		<%= render partial: 'real_estates/item_list_2', locals: { type: 2, res: @favorite_res.random.limit(per), list_id: 'favorite_res_list' } %>
	</section>
</article>

<article class="container-box container-box-transparent">
	<section class="container-box-header">
		<h2 class="container-box-title">
			Bất động sản dành cho bạn
		</h2>
	</section>
	<section class="container-box-body">
		<div class="container">
			<%
				per = 12
							
				page_href = Proc.new do |page| 
					request.GET['page'] = page
					'?' + request.GET.to_query
				end
			%>
			<%=
				render(
					partial: 'real_estates/item_list_2',
					locals: { 
						res: @res.page(page, per), 
						paging: (@res.count / per.to_f).ceil,
						list_id: 'res_list',
						page_href: page_href,
						current_page: page
					}
				)
			%>
		</div>
	</section>
</article>
